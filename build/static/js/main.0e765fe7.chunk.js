(this.webpackJsonpejcleather=this.webpackJsonpejcleather||[]).push([[0],{140:function(e,t,c){},150:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),n=c(54),r=c.n(n),i=c(12),l=c(5),o=c(7),d=c(25);c(68),c(153),c(151),c(152);d.a.initializeApp({apiKey:"AIzaSyAjUIUzSfB-TuCazSmINsJKHPgtGM5B81g",authDomain:"ejcleather.firebaseapp.com",databaseURL:"https://ejcleather-default-rtdb.firebaseio.com",projectId:"ejcleather",storageBucket:"ejcleather.appspot.com",messagingSenderId:"609355130523",appId:"1:609355130523:web:b30ca04a3329970bf8483e",measurementId:"G-NWN89DQ5DZ"});var j=d.a.storage();d.a.analytics();var u=c(0),b=s.a.createContext();function m(){return Object(a.useContext)(b)}var h=function(e){var t=e.children,c=Object(a.useState)({loggedIn:!1}),s=Object(l.a)(c,2),n=s[0],r=s[1],i=new d.a.auth.GoogleAuthProvider;Object(a.useEffect)((function(){return d.a.auth().onAuthStateChanged((function(e){e?d.a.firestore().collection("users").doc(e.uid).get().then((function(t){var c=t.data();r({id:e.uid,firstName:c.firstName,lastName:c.lastName,image:c.image,email:c.email,username:c.username,bio:c.bio,loggedIn:!0})})):r({loggedIn:!1})}))}),[]);var o={currentUser:n,signIn:function(){return d.a.auth().setPersistence(d.a.auth.Auth.Persistence.LOCAL).then((function(){d.a.auth().signInWithPopup(i).then((function(e){d.a.firestore().collection("users").doc(e.user.uid).get().then((function(t){t.exists||d.a.firestore().collection("users").doc(e.user.uid).set({name:e.user.displayName})}))}))})).catch((function(e){return console.error("".concat(e.code,"\n ").concat(e.message))}))},logout:function(){d.a.auth().signOut().then((function(){return console.log("logged out successfully")})).catch((function(e){return console.error(e)}))}};return Object(u.jsx)(b.Provider,{value:o,children:t})},x=c(56),O=c(63),f=Object(a.createContext)(),p=function(e){var t=Object(a.useState)([]),c=Object(l.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)([]),o=Object(l.a)(r,2),j=o[0],b=o[1],h=Object(a.useState)([]),p=Object(l.a)(h,2),g=p[0],v=(p[1],d.a.firestore()),N=m().currentUser,y=Object(a.useState)({items:{},quantity:0,subtotal:0,grandtotal:0}),w=Object(l.a)(y,2),C=w[0],I=w[1],k=Object(a.useState)({items:{},quantity:0,subtotal:0,grandtotal:0}),S=Object(l.a)(k,2),F=S[0],P=S[1];function q(){var e={},t=0,c=0,a=0,s=0;v.collection("users").doc(N.id).collection("cart").get().then((function(n){n.forEach((function(n){var r=n.data();e[n.id]=r,t+=r.quantity,c+=parseFloat(r.price)*t,a+=parseFloat(r.tax)*t,s+=c+a})),I({items:e,quantity:t,subtotal:(c/100).toFixed(2),taxes:(a/100).toFixed(2),grandtotal:(s/100).toFixed(2)})}))}function D(){var e={},t=0,c=0,a=0,s=0;v.collection("users").doc(N.id).collection("wishlist").get().then((function(n){n.forEach((function(n){var r=n.data();e[n.id]=r,t+=r.quantity,c+=parseFloat(r.price)*t,a+=parseFloat(r.tax)*t,s+=c+a})),P({items:e,quantity:t,subtotal:(c/100).toFixed(2),taxes:(a/100).toFixed(2),grandtotal:(s/100).toFixed(2)})}))}Object(a.useEffect)((function(){N.loggedIn&&(C.hasOwnProperty("items")&&q(),D())}),[v,N.loggedIn]),Object(a.useEffect)((function(){var e=[];fetch("api/shop/products").then((function(e){return e.json()})).then((function(t){e=Object(O.a)(t.data);var c,a=[],s=Object(x.a)(e);try{for(s.s();!(c=s.n()).done;){var n=c.value,r=Object(i.a)(Object(i.a)({},n),{},{price:parseInt(100*parseFloat(n.metadata.price)),tax:parseInt(100*parseFloat(n.metadata.tax))});a.push(r)}}catch(l){s.e(l)}finally{s.f()}b(a)}))}),[]);var U=Object(a.useCallback)((function(){var e=[];v.collection("posts").orderBy("dateCreated","desc").get().then((function(t){t.forEach((function(t){e.push(Object(i.a)(Object(i.a)({},t.data()),{},{postId:t.id}))})),n(e)}))}),[v]);return Object(a.useEffect)((function(){U()}),[N.loggedIn,U]),Object(u.jsx)(f.Provider,{value:{postList:[s,n],getPosts:U,products:j,getCart:q,getWishlist:D,wishlist:F,cart:C,checkout:g},children:e.children})},g=(c(26),function(e){var t=m(),c=t.currentUser,s=t.logout,n=Object(a.useContext)(f).cart;return Object(u.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-light bg-light",children:[Object(u.jsx)(o.b,{className:"navbar-brand",to:"/",children:"Evan Colondres Leather"}),Object(u.jsx)("button",{className:"navbar-toggler d-lg-none",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[Object(u.jsxs)("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.b,{className:"nav-link",to:"/blog",children:"Blog"})}),Object(u.jsxs)("li",{className:"nav-item dropdown",children:[Object(u.jsx)("p",{className:"nav-link dropdown-toggle mb-0",to:".",id:"dropdownId","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Shop"}),Object(u.jsx)("div",{className:"dropdown-menu","aria-labelledby":"dropdownId",children:Object(u.jsx)(o.b,{className:"dropdown-item",to:"/shop",children:"Products"})})]})]}),Object(u.jsx)("ul",{className:"navbar-nav ml-auto",children:c.loggedIn?Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.b,{onClick:function(e){return function(e){e.preventDefault(),s()}(e)},className:"nav-link",to:"",children:"Logout"})}):Object(u.jsx)("li",{className:"nav-item-active",children:Object(u.jsx)(o.b,{onClick:function(t){return function(t){t.preventDefault(),e.signIn()}(t)},className:"nav-link",to:"",children:"Login"})})}),Object(u.jsx)("div",{children:c.loggedIn?Object(u.jsx)(o.b,{to:"/profile",className:"text-secondary nav-link fa fa-user"}):Object(u.jsx)(u.Fragment,{})}),Object(u.jsx)("div",{className:"nav-item",children:c.loggedIn?Object(u.jsx)(o.b,{to:"/wishlist",className:"text-secondary nav-link fa fa-heart-o"}):Object(u.jsx)(u.Fragment,{})}),Object(u.jsx)("div",{className:"nav-item-active",children:Object(u.jsx)(o.b,{to:"/cart",className:"text-secondary nav-link fa fa-shopping-bag",children:n.quantity})})]})]})}),v=[{image:"https://firebasestorage.googleapis.com/v0/b/ejcleather.appspot.com/o/images%2Fbag_shadow.JPG?alt=media&token=85abdfd9-98c6-4723-be4c-c8665b00b99b"},{image:"https://firebasestorage.googleapis.com/v0/b/ejcleather.appspot.com/o/images%2FIMG_1680-min.JPG?alt=media&token=dda7095e-6169-4365-b5f5-c23b01d79f20"},{image:"https://firebasestorage.googleapis.com/v0/b/ejcleather.appspot.com/o/images%2FIMG_1346.JPG?alt=media&token=c7ad1e67-f3d8-48f6-bf58-070932d39145"},{image:"https://firebasestorage.googleapis.com/v0/b/ejcleather.appspot.com/o/images%2FIMG_1290.JPG?alt=media&token=44f497ed-d30e-42cd-b0d1-9d0f880eeedd"},{image:"https://firebasestorage.googleapis.com/v0/b/ejcleather.appspot.com/o/images%2FIMG_1684.JPG?alt=media&token=8f1647e7-2cb9-47e7-a903-51ef36318143"}],N=function(e){var t=e.slides,c=Object(a.useState)(0),s=Object(l.a)(c,2),n=s[0],r=s[1],i=t.length;return!Array.isArray(t)||t.length<=0?null:Object(u.jsxs)("section",{className:"slider",children:[Object(u.jsx)("i",{onClick:function(){r(0===n?i-1:n-1)},className:"fa fa-arrow-circle-left left-arrow","aria-hidden":"true"}),Object(u.jsx)("i",{onClick:function(){r(n===i-1?0:n+1)},className:"fa fa-arrow-circle-right right-arrow","aria-hidden":"true"}),v.map((function(e,t){return Object(u.jsx)("div",{className:t===n?"slide active":"slide",children:t===n&&Object(u.jsx)("img",{src:e.image,alt:"travel image",className:"image"})},t)}))]})},y=function(){return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h3",{className:"text-3xl flex mb-2",children:"handmade leather goods"}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"col-md-10 offset-1",children:Object(u.jsx)(N,{slides:v})})]})},w=(c(76),c(77),function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),c=(t[0],t[1]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsxs)("form",{className:"footer-form",onSubmit:function(e){e.preventDefault();var t={name:e.target.name.value,email:e.target.email.value};d.a.firestore().collection("subscribers").add(t).then((function(e){})).catch((function(e){return console.error(e)})),e.target.reset()},method:"POST",children:[Object(u.jsx)("p",{className:"text-center",children:"Sign up to receive updates."}),Object(u.jsxs)("div",{className:"form-row mt-3 mb-4",children:[Object(u.jsx)("div",{className:"col",children:Object(u.jsx)("input",{minLength:"5",type:"text",id:"name",name:"name",className:"form-control",placeholder:"Name"})}),Object(u.jsx)("div",{className:"col",children:Object(u.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Email"})}),Object(u.jsx)("button",{onClick:function(){return c(!0)},className:"btn btn-secondary",type:"submit",children:"Subscribe"})]})]})}),Object(u.jsx)("hr",{}),Object(u.jsxs)("ul",{className:"text-center row list-unstyled",children:[Object(u.jsx)("li",{className:"list-item col",children:Object(u.jsx)(o.b,{className:"text-dark nav-link",to:"/",children:"Home"})}),Object(u.jsx)("li",{className:"list-item col",children:Object(u.jsx)(o.b,{className:"text-dark nav-link",to:"Blog",children:"Blog"})}),Object(u.jsx)("li",{className:"list-item col",children:Object(u.jsx)(o.b,{className:"text-dark nav-link",to:"Contact",children:"Contact"})})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{className:"text-center",children:[Object(u.jsx)("i",{className:"fa fa-copyright","aria-hidden":"true"}),"2021 Evan Colondres"]})})]})}),C=c(8),I=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h3",{children:"About"})})},k=c(58),S=c.n(k)()({projectId:"r9gkfdbk",dataset:"production"}),F=c(29),P=c.n(F),q=(c(140),function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){S.fetch("*[_type == 'post']{\n                title,\n                slug,\n                publishedAt,\n                mainImage{\n                    asset->{\n                        _id,\n                        url\n                    }\n                },\n                publishedAt,\n                \"timestamp\" : now()\n            }").then((function(e){return s(e)})).catch(console.error)}),[]),Object(u.jsx)("div",{className:"min-h-screen",children:Object(u.jsxs)("div",{className:"container mx-auto",children:[Object(u.jsx)("h3",{className:"text-3xl flex mb-2",children:"Blog Posts"}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"nav-item",children:Object(u.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 mt-3 gap-8",children:c&&c.map((function(e,t){return Object(u.jsxs)(o.b,{className:"nav-link text-dark",to:"/blog/"+e.slug.current,children:[Object(u.jsx)("span",{className:"block h-64 relative rounded leading-snug",children:Object(u.jsx)("img",{className:"w-full rounded-r object-cover absolute shadow",src:e.mainImage.asset.url,alt:"main here image"})},t),Object(u.jsx)("p",{className:"float-right",children:Object(u.jsx)("small",{className:"text-bold",children:P()(e.publishedAt).calendar()})}),Object(u.jsx)("h2",{className:"font-bold ",children:e.title})]},e.slug.current)}))})})]})})}),D=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h3",{children:"Made to order Products"})})},U=function(e){var t=m().currentUser,c=Object(a.useContext)(f).getCart,s=Object(a.useContext)(f),n=s.wishlist,r=s.getWishlist,i=Object(a.useState)("LOADING"),o=Object(l.a)(i,2),j=o[0],b=o[1],h=d.a.firestore(),x=t.loggedIn?"READY":"LOGGEDOUT";Object(a.useEffect)((function(){n.hasOwnProperty("items")&&b(n.items.hasOwnProperty(e.product.id)?"REMOVE":"ADD")}),[n]);return Object(u.jsx)("div",{className:"col-4",children:Object(u.jsxs)("div",{className:"card mb-3",children:[Object(u.jsx)("div",{className:"card-header",children:Object(u.jsxs)("h6",{children:[e.product.name,Object(u.jsxs)("span",{className:"float-right",children:["$",e.product.metadata.price]})]})}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("img",{className:"card-img-top",src:e.product.images[0],alt:e.product.name}),"READY"===x?Object(u.jsx)("button",{onClick:function(){return a=e.product,x="LOADING",void h.collection("users").doc(t.id).collection("cart").doc(e.product.id).get().then((function(s){var n;s.exists?(n=s.data()).quantity+=1:(n=a).quantity=1,h.collection("users").doc(t.id).collection("cart").doc(e.product.id).set(n),c()}));var a},className:"btn btn-secondary btn-block fa fa-shopping-bag",style:{marginTop:"10px"},href:".",children:Object(u.jsx)("span",{className:"ml-2",children:"Add to Cart"})}):Object(u.jsx)("button",{disabled:!0,className:"btn btn-success btn-block",style:{marginTop:"10px"},href:".",children:"Please Login"}),Object(u.jsx)("p",{className:"card-text",style:{marginTop:"10px"},children:e.product.description}),"ADD"===j?Object(u.jsx)("i",{onClick:function(){return c=e.product,void h.collection("users").doc(t.id).collection("wishlist").doc(e.product.id).get().then((function(a){var s;a.exists?(s=a.data()).quantity+=1:(s=c).quantity=1,h.collection("users").doc(t.id).collection("wishlist").doc(e.product.id).set(s),r()}));var c},className:"fa fa-heart-o","aria-hidden":"true"}):Object(u.jsx)("i",{onClick:function(){return c=e.product,void h.collection("users").doc(t.id).collection("wishlist").doc(c.id).delete().then((function(){r()}));var c},className:"fa fa-heart","aria-hidden":"true"})]})]})})},A=function(){var e=Object(a.useContext)(f).products;return Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("h3",{className:"text-3xl flex mb-2",children:"Shop"}),Object(u.jsx)("hr",{className:"mb-2"}),Object(u.jsx)("div",{className:"card-deck",children:e.map((function(e){return Object(u.jsx)(U,{product:e},e.id)}))})]})},E=c(38),L=c.n(E),T=c(59),G=function(e){var t=d.a.firestore(),c=Object(a.useContext)(f).getCart,n=m().currentUser,r=Object(a.useRef)();return Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-12 col-sm-12 col-md-2 text-center",children:Object(u.jsx)("img",{className:"img-responsive",src:e.data.images[0],alt:"prewiew",width:"120",height:"80"})}),Object(u.jsxs)("div",{className:"col-12 text-sm-center col-sm-12 text-md-left col-md-6",children:[Object(u.jsx)("h4",{className:"product-name text-2xl",children:Object(u.jsx)("strong",{children:e.data.name})}),Object(u.jsx)("h4",{className:"text-2xl",children:Object(u.jsx)("small",{children:e.data.description})})]}),Object(u.jsxs)("div",{className:"col-12 col-sm-12 text-sm-center col-md-4 text-md-right row",children:[Object(u.jsx)("div",{className:"col-3 col-sm-3 col-md-6 text-md-right",style:{paddingTop:"5px"},children:Object(u.jsx)("h6",{children:Object(u.jsxs)("strong",{children:["$",e.data.metadata.price," ",Object(u.jsx)("span",{className:"text-muted",children:"x"})]})})}),Object(u.jsx)("div",{className:"col-4 col-sm-4 col-md-4",children:Object(u.jsx)("div",{className:"quantity",children:Object(u.jsx)("input",{type:"number",step:"1",max:"99",min:"1",ref:r,onChange:function(){e.handleUpdate({id:e.data.id,quantity:parseInt(r.current.value)})},defaultValue:e.data.quantity,title:"Qty",className:"qty",size:"4"})})}),Object(u.jsx)("div",{className:"col-2 col-sm-2 col-md-2 text-right",children:Object(u.jsx)("button",{onClick:function(){return a=e.data.id,void t.collection("users").doc(n.id).collection("cart").doc(a).delete().then((function(){c()}));var a},type:"button",className:"btn btn-outline-danger btn-xs",children:Object(u.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})})]})]}),Object(u.jsx)("hr",{className:"mt-4 mb-4"})]})},_=c(60),B=function(){var e=Object(_.a)("pk_test_51JCUcqLH2Ct9I2iGlG4xm1Qs6qQBbFROylNNSmbl3Dpd9R9bspo9YHoZDR0DAIUcnqLpT7zJsKFKk4sAXKBO4Jlj001r0DiHUA"),t=(new URLSearchParams(window.location.search).get("clear_cart"),d.a.firestore()),c=m().currentUser,s=Object(a.useContext)(f),n=s.cart,r=(s.getCart,Object(a.useState)({})),j=Object(l.a)(r,2),b=j[0],h=j[1],x=function(e){if(e.id in b){var t=Object(i.a)({},b);t[e.id]=e.quantity,h(t)}else{var c={};c[e.id]=e.quantity,h(Object(i.a)(Object(i.a)({},b),c))}};Object(a.useEffect)((function(){Object.keys(b).forEach((function(e){t.collection("users").doc(c.id).collection("cart").doc(e).update({quantity:b[e]}).catch((function(e){return console.error(e)}))}))}),[b,c.id,t]);var O=function(){var t=Object(T.a)(L.a.mark((function t(c){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,e;case 3:a=t.sent,fetch("/api/shop/checkout",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){a.redirectToCheckout({sessionId:e.session_id})}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"card shopping-cart mb-4",children:[Object(u.jsxs)("div",{className:"card-header bg-secondary text-light",children:[Object(u.jsx)("i",{className:"fa fa-shopping-bag mr-1","aria-hidden":"true"}),"Shopping Bag",Object(u.jsx)(o.b,{to:"/shop",className:"btn btn-outline-light btn-sm pull-right",children:"Continue Shopping"}),Object(u.jsx)("div",{className:"clearfix"})]}),Object(u.jsxs)("div",{className:"card-body",children:[Object.values(n.items).map((function(e){return Object(u.jsx)(G,{handleUpdate:x,data:e},e.id)})),Object(u.jsx)("div",{className:"pull-right",children:Object(u.jsx)("button",{onClick:function(){return x},className:"btn btn-outline-secondary pull-right",children:"Update Shopping Bag"})})]}),Object(u.jsxs)("div",{className:"card-footer bg-secondary",children:[Object(u.jsxs)("div",{className:"text-right text-light",children:[Object(u.jsxs)("div",{className:"cart-totals",children:["Subtotal: ",Object(u.jsxs)("b",{children:["$",n.subtotal]})]}),Object(u.jsxs)("div",{className:"cart-totals",children:["Tax: ",Object(u.jsxs)("b",{children:["$",n.taxes]})]}),Object(u.jsxs)("div",{className:"cart-totals",children:["Grand total: ",Object(u.jsxs)("b",{children:["$",n.grandtotal]})]})]}),Object(u.jsx)("div",{className:"pull-right",style:{margin:"10px"},children:Object(u.jsx)("form",{id:"checkout-form",onSubmit:O,method:"POST",children:Object(u.jsx)("input",{type:"submit",className:"btn btn-success pull-right",value:"Checkout"})})})]})]})},J=c(62),R=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Contact"}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-6 offset-md-3 mb-5",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),J.a.sendForm("service_6cq9psy","ejcleather",e.target,"user_aAzYGFwiF6h0RBCztTjvK").then((function(e){}),(function(e){})),e.target.reset()},children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Name"})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Email"})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsxs)("select",{className:"form-control",name:"inquiry",id:"",defaultValue:"option",children:[Object(u.jsx)("option",{disabled:!0,value:"option",children:"What are you interested in?"}),Object(u.jsx)("option",{value:"leather-goods",children:"Leather bags or accessories"}),Object(u.jsx)("option",{value:"leather-tools",children:"Leather tools"}),Object(u.jsx)("option",{value:"leather-hardware",children:"Leather hardware"}),Object(u.jsx)("option",{value:"leather-classes",children:"Leather classes"})]})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("textarea",{className:"form-control",name:"message",id:"",cols:"30",rows:"10"})}),Object(u.jsx)("input",{type:"submit",className:"btn btn-secondary btn-block",value:"Send us a message"})]})})})]})},z=c(34),W=c.n(z),M=c(61),V=c.n(M),K=function(e){return Object(u.jsxs)("li",{className:"list-group-item",children:[Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)("img",{className:"rounded w-20 h-20",src:e.post.avatar,alt:"avatar image"}),Object(u.jsxs)("cite",{className:"",children:["-",e.post.userId]})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("span",{children:[Object(u.jsx)("small",{className:"float-right",children:P()(e.post.dateCreated.toDate()).fromNow()}),Object(u.jsx)("p",{children:e.post.body})]})})]})},$=function(e){var t=Object(a.useContext)(f).postList,c=Object(l.a)(t,1)[0];return Object(u.jsx)("ul",{className:"list-group",children:c.map((function(e){return Object(u.jsx)(K,{post:e},e.postId)}))})},H=W()(S);function Q(e){return H.image(e)}var Y=function(e){var t=m().currentUser,c=Object(a.useContext)(f),s=c.postList,n=c.getPosts,r=Object(a.useState)(null),i=Object(l.a)(r,2),o=i[0],j=i[1],b=Object(C.f)().slug;if(Object(a.useEffect)((function(){S.fetch("*[slug.current == $slug]{\n                title,\n                slug,\n                mainImage{\n                    asset->{\n                        _id,\n                        url\n                    }\n                },\n                body,\n                'name': author->name,\n                'authorImage': author->image\n            }",{slug:b}).then((function(e){return j(e[0])})).catch(console.error)}),[b]),!o)return Object(u.jsx)("div",{children:"Loading..."});return Object(u.jsxs)("div",{className:"min-h-screen",children:[Object(u.jsx)("div",{className:"container shadow-lg mx-auto bg-gray-300 rounded-lg",children:Object(u.jsxs)("div",{className:"relative",children:[Object(u.jsx)("div",{className:"absolute h-full w-full flex items-center justify-center p-8",children:Object(u.jsxs)("div",{className:"bg-gray-100 bg-opacity-75 rounded p-12",children:[Object(u.jsx)("h3",{className:"text-2xl lg:text-3xl mb-3",children:o.title}),Object(u.jsxs)("div",{className:"flex justify-center text-gray-800",children:[Object(u.jsx)("img",{className:"author",src:Q(o.authorImage).width(100).url(),alt:"Author is Evan"}),Object(u.jsx)("h3",{className:"flex items-center pl-2 text-2xl",children:o.name})]})]})}),Object(u.jsx)("img",{className:"w-full object-cover rounded-t",src:Q(o.mainImage).url(),alt:"main image of post",style:{height:"400px"}})]})}),Object(u.jsxs)("div",{className:"px-16 lg:px-48 py-12 lg:py-20 prose lg:prose-xl max-w-full",children:[Object(u.jsx)(V.a,{blocks:o.body,projectId:S.clientConfig.projectId,dataset:S.clientConfig.dataset}),Object(u.jsx)("h3",{children:"Comments"}),Object(u.jsx)("hr",{}),Object(u.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault();var c={body:e.target.body.value,dateCreated:d.a.firestore.Timestamp.fromDate(new Date),dateUpdated:null,avatar:t.image,userId:t.username,slug:b};d.a.firestore().collection("posts").add(c).then((function(e){n()})).catch((function(e){return console.err(e)}))}(e)},action:"",method:"POST",children:Object(u.jsx)("div",{className:"form-group",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-10",children:Object(u.jsx)("input",{className:"form-control",type:"text",name:"body",placeholder:"Add a comment..."})}),Object(u.jsx)("div",{className:"col-md-2",children:Object(u.jsx)("input",{className:"btn btn-info btn-block",type:"submit",value:"Post"})})]})})}),Object(u.jsx)("hr",{}),Object(u.jsx)($,{posts:s[0],slug:b})]})]})},Z=function(e){var t=d.a.firestore(),c=Object(a.useContext)(f).getWishlist,n=m().currentUser,r=(Object(a.useContext)(f).getCart,Object(a.useRef)());return Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-12 col-sm-12 col-md-2 text-center",children:Object(u.jsx)("img",{className:"img-responsive",src:e.data.images[0],alt:"prewiew",width:"120",height:"80"})}),Object(u.jsxs)("div",{className:"col-12 text-sm-center col-sm-12 text-md-left col-md-6",children:[Object(u.jsx)("h4",{className:"product-name text-2xl",children:Object(u.jsx)("strong",{children:e.data.name})}),Object(u.jsx)("h4",{className:"text-2xl",children:Object(u.jsx)("small",{children:e.data.description})})]}),Object(u.jsxs)("div",{className:"col-12 col-sm-12 text-sm-center col-md-4 text-md-right row",children:[Object(u.jsx)("div",{className:"col-3 col-sm-3 col-md-6 text-md-right",style:{paddingTop:"5px"}}),Object(u.jsx)("div",{className:"col-4 col-sm-4 col-md-4",children:Object(u.jsx)("div",{className:"quantity",children:Object(u.jsx)("input",{type:"number",step:"1",max:"99",min:"1",ref:r,onChange:function(){e.handleUpdate({id:e.data.id,quantity:parseInt(r.current.value)})},defaultValue:e.data.quantity,title:"Qty",className:"qty",size:"4"})})}),Object(u.jsx)("div",{className:"col-2 col-sm-2 col-md-2 text-right",children:Object(u.jsx)("button",{onClick:function(){return a=e.data.id,void t.collection("users").doc(n.id).collection("wishlist").doc(a).delete().then((function(){c()}));var a},type:"button",className:"btn btn-outline-danger btn-xs",children:Object(u.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})}),Object(u.jsx)("div",{})]})]}),Object(u.jsx)("hr",{className:"mt-4 mb-4"})]})},X=function(e){var t=Object(a.useState)({}),c=Object(l.a)(t,2),s=c[0],n=c[1],r=Object(a.useContext)(f).wishlist,d=function(e){if(e.id in s){var t=Object(i.a)({},s);t[e.id]=e.quantity,n(t)}else{var c={};c[e.id]=e.quantity,n(Object(i.a)(Object(i.a)({},s),c))}};return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"card shopping-cart mb-4",children:[Object(u.jsxs)("div",{className:"card-header bg-secondary text-light",children:[Object(u.jsx)("i",{className:"fa fa-heart-o mr-1","aria-hidden":"true"}),"Wishlist",Object(u.jsx)(o.b,{to:"/shop",className:"btn btn-outline-light btn-sm pull-right",children:"Continue Shopping"}),Object(u.jsx)("div",{className:"clearfix"})]}),Object(u.jsxs)("div",{className:"card-body",children:[Object.values(r.items).map((function(e){return Object(u.jsx)(Z,{handleUpdate:d,data:e},e.id)})),Object(u.jsx)("div",{className:"pull-right",children:Object(u.jsx)("button",{onClick:function(){return d},className:"btn btn-outline-secondary pull-right",children:"Update Wishlist"})})]}),Object(u.jsx)("div",{className:"card-footer bg-secondary",children:Object(u.jsx)("div",{className:"text-right text-light"})})]})})},ee=function(){var e=m().currentUser,t=Object(a.useState)(null),c=Object(l.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(""),i=Object(l.a)(r,2),o=i[0],b=i[1];Object(a.useEffect)((function(){b(e.image)}),[e.image]);return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsxs)("h3",{className:"text-2xl mb-3",children:["Profile | Welcome ",e.firstName]}),Object(u.jsx)("hr",{className:"mb-4"}),Object(u.jsxs)("div",{className:"row offset-3",children:[Object(u.jsxs)("div",{className:"col-md-4",children:[Object(u.jsx)("img",{id:"myimg",className:"img-fluid",src:o,alt:"profile"},o),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&n(e.target.files[0])},id:"image",className:"form-control-file mb-1",name:"profile_image"}),Object(u.jsx)("button",{className:"btn btn-secondary",onClick:function(){j.ref("images/".concat(e.id,"/").concat(s.name)).put(s).on("state_changed",(function(e){}),(function(e){}),(function(){j.ref("images").child(e.id).child(s.name).getDownloadURL().then((function(e){b(e)}))}))},children:"Upload"})]})})})]}),Object(u.jsx)("div",{className:"col-md-8",children:Object(u.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault();var c={firstName:t.target.first_name.value,lastName:t.target.last_name.value,username:t.target.username.value,image:o,profileImage:o};d.a.firestore().collection("users").doc(e.id).set(c).then((function(e){})).catch((function(e){return console.error(e)})),t.target.reset()}(t)},action:"",method:"POST",encType:"multipart/form-data",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-6",children:Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"text",className:"form-control",id:"firstName",placeholder:"First Name",name:"first_name",defaultValue:e.firstName})})})}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-6",children:Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"text",className:"form-control",id:"lastName",placeholder:"Last Name",name:"last_name",defaultValue:e.lastName})})})}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-6",children:Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"username",className:"form-control",placeholder:"Username",id:"username",name:"username",defaultValue:e.username})})})}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-6",children:Object(u.jsx)("input",{type:"submit",id:"update",className:"btn btn-info btn-block",value:"Update Profile"})})})]})})]})]})},te=function(e){return Object(u.jsxs)("div",{className:"main-wrapper",children:[Object(u.jsx)("header",{children:Object(u.jsx)(g,{signIn:e.signIn})}),Object(u.jsx)("main",{className:"container",children:Object(u.jsxs)(C.c,{children:[Object(u.jsx)(C.a,{exact:!0,path:"/",render:function(){return Object(u.jsx)(y,{posts:e.posts})}}),Object(u.jsx)(C.a,{exact:!0,path:"/about",render:function(){return Object(u.jsx)(I,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/blog",render:function(){return Object(u.jsx)(q,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/blog/:slug",render:function(){return Object(u.jsx)(Y,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/profile",render:function(){return Object(u.jsx)(ee,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/contact",render:function(){return Object(u.jsx)(R,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/order",render:function(){return Object(u.jsx)(D,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/shop",render:function(){return Object(u.jsx)(A,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/wishlist",render:function(){return Object(u.jsx)(X,{})}}),Object(u.jsx)(C.a,{exact:!0,path:"/cart",render:function(){return Object(u.jsx)(B,{})}})]})}),Object(u.jsx)("footer",{className:"container p-4",children:Object(u.jsx)(w,{})})]})},ce=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),c=t[0],s=t[1],n=d.a.firestore(),r=m().signIn,o=Object(a.useCallback)((function(){var e=[];n.collection("posts").get().then((function(t){t.forEach((function(t){e.push(Object(i.a)(Object(i.a)({},t.data()),{},{postId:t.id}))})),s(e)}))}),[n]);return Object(a.useEffect)((function(){o()}),[o]),Object(u.jsx)("div",{children:Object(u.jsx)(te,{signIn:r,posts:c})})},ae=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,154)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),a(e),s(e),n(e),r(e)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(h,{children:Object(u.jsx)(p,{children:Object(u.jsx)(ce,{})})})})}),document.getElementById("root")),ae()},26:function(e,t,c){},76:function(e,t,c){}},[[150,1,2]]]);
//# sourceMappingURL=main.0e765fe7.chunk.js.map